This document holds some useful information for developing Happy.

CI on GitHub Actions
====================

2021-07-14

The GHC workflow file `.github/workflows/haskell-ci.yml` is generated by:

    haskell-ci github packages/happy/happy.cabal
    patch --input=.github/haskell-ci.patch .github/workflows/haskell-ci.yml

The patch introduces happy specifics to the build and test process that
are not covered by a vanilla instance of the haskell-ci workflow.

When new GHC versions become available, CI can be updated by

 - adding these versions to the `tested-with` field in `happy.cabal`
   (possibly removing obsolete minor versions)

 - generate the `haskell-ci.yml` by the steps above.

This should work as long as `haskell-ci` does not change its generated
workflow too much.  Otherwise, the patch might not apply cleanly and
the workflow has to be patched manually.
